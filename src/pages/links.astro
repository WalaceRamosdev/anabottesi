---
import Layout from "../layouts/Layout.astro";
import { Image } from "astro:assets";
import anaPortrait from "../assets/profissional/anaBottesi1.svg";

const links = [
    {
        title: "Agendar Sess√£o (WhatsApp)",
        url: "https://wa.me/5511973454557?text=Ol√° Ana, vim pelo seu site e gostaria de agendar uma sess√£o.",
        icon: "üí¨",
        primary: true,
        description: "Inicie sua jornada de transforma√ß√£o",
    },
    {
        title: "Visite meu Site Oficial",
        url: "/",
        icon: "üåê",
        description: "Conhe√ßa mais sobre minha abordagem",
    },
    {
        title: "Blog: Artigos e Reflex√µes",
        url: "/blog",
        icon: "üìñ",
        description: "Conte√∫dos sobre psican√°lise e feminino",
    },
    {
        title: "Acompanhe no Instagram",
        url: "https://instagram.com/anabottesi.psicanalista",
        icon: "üì∏",
        description: "Doses di√°rias de insights",
    },
    {
        title: "Enviar E-mail",
        url: "mailto:contatoanabottesi@gmail.com",
        icon: "‚úâÔ∏è",
        description: "contatoanabottesi@gmail.com",
    },
];
---

<Layout
    title="Links √öteis | Ana Bottesi"
    description="Acesse todos os canais de atendimento e conte√∫dos de Ana Bottesi em um s√≥ lugar."
>
    <main
        class="min-h-screen bg-brand-bg relative overflow-hidden flex flex-col items-center justify-center py-20 px-4"
    >
        <!-- Elementos de Fundo Decorativos -->
        <div
            class="absolute top-0 right-0 w-1/3 h-full bg-brand-secondary/5 -skew-x-12 transform origin-top-right pointer-events-none"
        >
        </div>
        <div
            class="absolute -bottom-24 -left-24 w-64 h-64 bg-brand-primary/5 rounded-full blur-3xl pointer-events-none"
        >
        </div>

        <!-- Container de Borboletas -->
        <div
            class="absolute inset-0 pointer-events-none overflow-hidden"
            id="links-butterfly-container"
        >
        </div>

        <!-- Conte√∫do Principal -->
        <div class="w-full max-w-md relative z-10" id="links-content">
            <!-- Header do Perfil -->
            <div class="text-center mb-10 flex flex-col items-center">
                <div class="relative mb-6 group">
                    <div
                        class="absolute -inset-1 bg-gradient-to-r from-brand-primary/30 to-brand-secondary/30 rounded-full blur opacity-50 group-hover:opacity-100 transition duration-1000 group-hover:duration-200"
                    >
                    </div>
                    <div
                        class="relative w-32 h-32 rounded-full overflow-hidden border-4 border-white shadow-xl"
                    >
                        <Image
                            src={anaPortrait}
                            alt="Ana Bottesi"
                            class="w-full h-full object-cover"
                            loading="eager"
                        />
                    </div>
                    <!-- √çcone de Verifica√ß√£o (opcional, d√° um toque premium) -->
                    <div
                        class="absolute bottom-1 right-1 bg-brand-primary text-white text-[10px] w-6 h-6 flex items-center justify-center rounded-full border-2 border-white shadow-sm"
                        title="Psicanalista Verificada"
                    >
                        ‚úì
                    </div>
                </div>

                <h1 class="text-3xl font-serif font-bold text-brand-text mb-2">
                    Ana Bottesi
                </h1>
                <p
                    class="text-brand-primary font-sans font-medium tracking-widest uppercase text-xs mb-4"
                >
                    Psicanalista Cl√≠nica
                </p>
                <p class="text-brand-text/60 text-sm max-w-xs leading-relaxed">
                    Te ajudo a sair do casulo e redescobrir sua ess√™ncia atrav√©s
                    da psican√°lise.
                </p>
            </div>

            <!-- Lista de Links -->
            <div class="space-y-4">
                {
                    links.map((link) => (
                        <a
                            href={link.url}
                            target={
                                link.url.startsWith("http") ? "_blank" : "_self"
                            }
                            class={`link-card block p-1 rounded-2xl transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg group ${
                                link.primary
                                    ? "bg-gradient-to-r from-brand-primary to-[#9e8568]"
                                    : "bg-white hover:bg-white/80"
                            }`}
                        >
                            <div
                                class={`flex items-center p-4 rounded-xl h-full transition-all ${
                                    link.primary
                                        ? "bg-transparent text-white"
                                        : "bg-white border border-brand-primary/10 group-hover:border-brand-primary/30 text-brand-text"
                                }`}
                            >
                                <span
                                    class={`text-2xl mr-4 flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full ${
                                        link.primary
                                            ? "bg-white/20"
                                            : "bg-brand-bg text-brand-primary"
                                    }`}
                                >
                                    {link.icon}
                                </span>
                                <div class="flex-grow">
                                    <span class="font-bold block text-sm md:text-base">
                                        {link.title}
                                    </span>
                                    {link.description && (
                                        <span
                                            class={`text-xs block mt-0.5 ${
                                                link.primary
                                                    ? "text-white/80"
                                                    : "text-brand-text/50"
                                            }`}
                                        >
                                            {link.description}
                                        </span>
                                    )}
                                </div>
                                <span
                                    class={`transform transition-transform duration-300 group-hover:translate-x-1 ${
                                        link.primary
                                            ? "text-white"
                                            : "text-brand-primary"
                                    }`}
                                >
                                    ‚Üí
                                </span>
                            </div>
                        </a>
                    ))
                }
            </div>

            <!-- Footer -->
            <div class="mt-12 text-center">
                <div class="flex justify-center gap-4 mb-8">
                    <a
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        ><rect x="2" y="4" width="20" height="16" rx="2"
                        ></rect><path
                            d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"
                        ></path></a
                    >
                </div>
            </div>
            <div class="text-[10px] text-brand-text/60">
                <span class="uppercase tracking-[0.2em] block mb-2"
                    >Desenvolvido por</span
                >
                <a
                    href="https://sitesalphacode.com.br"
                    target="_blank"
                    class="text-brand-primary hover:text-brand-accent transition-all font-bold uppercase tracking-widest inline-flex items-center gap-1 group"
                >
                    Alpha Code
                    <span
                        class="opacity-0 group-hover:opacity-100 transition-opacity -ml-2 group-hover:ml-0"
                        >‚ö°</span
                    >
                </a>
            </div>
        </div>
    </main>
</Layout>

<style>
    /* Estilos das borboletas (consistentes com o resto do site) */
    :global(.link-butterfly) {
        position: absolute;
        width: 20px;
        height: 20px;
        pointer-events: none;
        z-index: 0;
        opacity: 0.15;
    }

    :global(.butterfly-wing) {
        position: absolute;
        width: 50%;
        height: 80%;
        background-color: var(--color-brand-primary);
        border-radius: 50% 50% 50% 50% / 40% 40% 60% 60%;
    }

    :global(.butterfly-wing.left) {
        left: 0;
        transform-origin: right center;
        animation: flap-left 0.4s ease-in-out infinite alternate;
    }

    :global(.butterfly-wing.right) {
        right: 0;
        transform-origin: left center;
        animation: flap-right 0.4s ease-in-out infinite alternate;
    }

    @keyframes flap-left {
        from {
            transform: rotateY(0deg);
        }
        to {
            transform: rotateY(70deg);
        }
    }

    @keyframes flap-right {
        from {
            transform: rotateY(0deg);
        }
        to {
            transform: rotateY(-70deg);
        }
    }
</style>

<script>
    import { gsap } from "gsap";

    // Anima√ß√£o de Entrada Robusta
    const initLinksAnimation = () => {
        // Garante que tudo esteja vis√≠vel por padr√£o caso a anima√ß√£o falhe ou seja r√°pida demais
        gsap.set(".w-32, h1, p, .link-card", { visibility: "visible" });

        const tl = gsap.timeline({
            defaults: { ease: "power3.out" },
            // Garante limpeza ap√≥s terminar para evitar bugs de estado
            onComplete: () => {
                gsap.set(".w-32, h1, p, .link-card", { clearProps: "all" });
            },
        });

        tl.fromTo(
            ".w-32",
            { scale: 0, opacity: 0 },
            {
                scale: 1,
                opacity: 1,
                duration: 1,
                ease: "back.out(1.7)",
            },
        )
            .fromTo(
                "h1, p",
                { y: 20, opacity: 0 },
                {
                    y: 0,
                    opacity: 1,
                    duration: 0.8,
                    stagger: 0.1,
                },
                "-=0.5",
            )
            .fromTo(
                ".link-card",
                { y: 30, opacity: 0 },
                {
                    y: 0,
                    opacity: 1,
                    duration: 0.8,
                    stagger: 0.1,
                },
                "-=0.6",
            );

        createButterflies();
    };

    // Borboletas
    const createButterflies = () => {
        const container = document.getElementById("links-butterfly-container");
        if (!container) return;

        const count = 12; // Mais borboletas para preencher a tela vertical
        for (let i = 0; i < count; i++) {
            const butterfly = document.createElement("div");
            butterfly.className = "link-butterfly";
            butterfly.innerHTML = `
                <div class="butterfly-wing left"></div>
                <div class="butterfly-wing right"></div>
            `;

            const startX = Math.random() * window.innerWidth;
            const startY = Math.random() * window.innerHeight;

            gsap.set(butterfly, {
                x: startX,
                y: startY,
                scale: 0.3 + Math.random() * 0.5,
                rotation: Math.random() * 360,
            });

            container.appendChild(butterfly);
            animateButterfly(butterfly);
        }
    };

    const animateButterfly = (el: HTMLElement) => {
        gsap.to(el, {
            x: `+=${Math.random() * 300 - 150}`,
            y: `+=${Math.random() * 300 - 150}`,
            rotation: `+=${Math.random() * 90 - 45}`,
            duration: 5 + Math.random() * 5,
            ease: "sine.inOut",
            onComplete: () => animateButterfly(el),
        });

        gsap.to(el, {
            opacity: 0.25,
            duration: 2,
            repeat: -1,
            yoyo: true,
        });
    };

    // Inicializa√ß√£o
    if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", initLinksAnimation);
    } else {
        initLinksAnimation();
    }
</script>
